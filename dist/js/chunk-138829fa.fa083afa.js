(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-138829fa"],{1283:function(e,r,t){},"1ae4":function(e,r,t){e.exports=t.p+"img/logo.2e49d852.svg"},"38ce":function(e,r,t){"use strict";t("56bf")},"56bf":function(e,r,t){},"5e34":function(e,r,t){"use strict";t("606a")},"606a":function(e,r,t){},acdf:function(e,r,t){"use strict";t("1283")},b07f:function(e,r,t){},d201:function(e,r,t){"use strict";t("b07f")},dc3f:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("div",{staticClass:"login-con"},[t("div",{staticClass:"login-con-form"},[e._m(0),"signIn"===e.loginType?t("login-form",{on:{"switch-type":function(r){return e.switchType(r)}}}):e._e(),"register"===e.loginType?t("addmembers",{on:{"switch-type":function(r){return e.switchType(r)}}}):e._e()],1)])])},s=[function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"login-con-form-title"},[a("img",{attrs:{src:t("1ae4"),alt:""}})])}],o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("h2"),t("Form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules},nativeOn:{keydown:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}}},[t("FormItem",{attrs:{prop:"userName"}},[t("Input",{attrs:{placeholder:"请输入用户名/邮箱"},model:{value:e.form.userName,callback:function(r){e.$set(e.form,"userName",r)},expression:"form.userName"}})],1),t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),t("FormItem",[t("div",{staticClass:"signIn"},[e.errorNews?t("span",[e._v(e._s(e.errorNews))]):e._e(),t("p",[e._v("\n          还没有账户?\n          "),t("a",{on:{click:function(r){return e.switchType()}}},[e._v("立即注册")])])]),t("Button",{staticClass:"land",attrs:{type:"primary",long:""},on:{click:e.handleSubmit}},[e._v("登录")])],1)],1)],1)},n=[],i=t("31ca"),l=t("e04f"),u=t.n(l),c={name:"LoginForm",inject:["app"],props:{userNameRules:{type:Array,default:function(){return[{required:!0,message:"用户名/邮箱不能为空",trigger:"blur"}]}},passwordRules:{type:Array,default:function(){return[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},data:function(){return{form:{userName:"",password:""},errorNews:""}},computed:{rules:function(){return{userName:this.userNameRules,password:this.passwordRules}}},mounted:function(){},methods:{handleSubmit:function(){var e=this;this.$refs.loginForm.validate((function(r){if(r){var t=e.form;Object(i["a"])({urlKey:"/api/login",methods:"POST",data:{name:t.userName,pass:t.password}}).then((function(r){if(1===r.status){var t=JSON.parse(r.data.Authorization);u.a.set("token",t.token,{expires:365,path:""}),u.a.set("user_info",t,{expires:365,path:""}),e.$router.push("/home")}else e.$Message.error(r.message)}))}}))},switchType:function(){this.$emit("switch-type","register")}}},d=c,m=(t("5e34"),t("d201"),t("cba8")),p=Object(m["a"])(d,o,n,!1,null,"fc80501a",null),f=p.exports,w=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register"},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate}},[t("FormItem",{attrs:{prop:"name"}},[t("Input",{attrs:{placeholder:"请输入用户名"},model:{value:e.formValidate.name,callback:function(r){e.$set(e.formValidate,"name",r)},expression:"formValidate.name"}})],1),t("FormItem",{attrs:{prop:"email"}},[t("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.formValidate.email,callback:function(r){e.$set(e.formValidate,"email",r)},expression:"formValidate.email"}})],1),t("FormItem",{attrs:{prop:"password"}},[t("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formValidate.password,callback:function(r){e.$set(e.formValidate,"password",r)},expression:"formValidate.password"}})],1),t("FormItem",{attrs:{prop:"rePassword"}},[t("Input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.formValidate.rePassword,callback:function(r){e.$set(e.formValidate,"rePassword",r)},expression:"formValidate.rePassword"}})],1),t("FormItem",[t("div",{staticClass:"error"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.errorNews,expression:"errorNews"}]},[e._v("\n          "+e._s(e.errorNews))]),t("p",[e._v("已经有账户?"),t("a",{on:{click:function(r){return e.switchType("signIn")}}},[e._v("登录")])])]),t("Button",{staticClass:"land",attrs:{type:"primary",long:""},on:{click:function(r){return e.handleSubmit("formValidate")}}},[e._v("注册")])],1)],1)],1)},h=[],g=(t("a450"),{data:function(){var e=this,r=function(r,t,a){""===t?a(new Error("请输入密码!")):(""!==e.formValidate.rePassword&&e.$refs.formValidate.validateField("rePassword"),a())},t=function(r,t,a){""===t?a(new Error("请重新输入密码!")):t!==e.formValidate.password?a(new Error("两个密码不一致!")):a()};return{formValidate:{name:"",email:"",password:"",rePassword:""},ruleValidate:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],email:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],rePassword:[{required:!0,validator:t,trigger:"blur"}]},errorNews:""}},props:{isAddUserModalShow:{default:!1,type:Boolean}},watch:{},mounted:function(){},methods:{handleSubmit:function(e){var r=this;this.$refs[e].validate((function(e){if(e){var t=r.formValidate;Object(i["a"])({urlKey:"/api/user/register",methods:"POST",data:{name:t.name,email:t.email,pass:t.password,rePass:t.rePassword}}).then((function(e){1===e.status?r.switchType():r.$Message.error(e.message)}))}}))},switchType:function(){this.$emit("switch-type","signIn")}}}),v=g,y=(t("acdf"),Object(m["a"])(v,w,h,!1,null,null,null)),b=y.exports,_={components:{LoginForm:f,addmembers:b},data:function(){return{loginType:"signIn"}},methods:{switchType:function(e){this.loginType=e}}},V=_,k=(t("38ce"),Object(m["a"])(V,a,s,!1,null,"29c185a2",null));r["default"]=k.exports}}]);
//# sourceMappingURL=chunk-138829fa.fa083afa.js.map